<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Valentine ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
height:100vh;
overflow:hidden;
background: linear-gradient(-45deg,#ff9a9e,#fad0c4,#ffdde1);
background-size:400% 400%;
animation:gradient 12s ease infinite;
color:white;
}

@keyframes gradient{
0%{background-position:0% 50%}
50%{background-position:100% 50%}
100%{background-position:0% 50%}
}

.container{
position:absolute;
width:100%;
height:100%;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
z-index:10;
}

.card{
position:relative;
background:rgba(255,255,255,0.15);
padding:40px;
border-radius:20px;
backdrop-filter:blur(20px);
box-shadow:0 10px 30px rgba(0,0,0,0.2);
text-align:center;
}

button{
padding:15px 30px;
border:none;
border-radius:30px;
font-size:18px;
cursor:pointer;
margin:10px;
z-index:20;
position:relative;
}

.yes{
background:#ff4b7d;
color:white;
}

.no{
background:white;
color:#ff4b7d;
position:absolute;
}

.hidden{
display:none;
}

#gameArea{
position:absolute;
width:100%;
height:100%;
z-index:5;
pointer-events:auto; /* FIX supaya hati bisa diklik */
}

.heart{
position:absolute;
font-size:30px;
cursor:pointer;
z-index:6;
user-select:none;
}

#gameUI{
pointer-events:none;
}

#scoreText{
font-size:22px;
margin-top:10px;
}

#targetText{
font-size:16px;
opacity:0.9;
}

canvas{
position:absolute;
top:0;
left:0;
pointer-events:none;
z-index:2;
}

#letter{
margin-top:20px;
white-space:pre-line;
font-size:20px;
min-height:120px;
}

</style>
</head>
<body>

<audio id="music" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_c8c8a73467.mp3">
</audio>

<canvas id="confetti"></canvas>

<!-- QUESTION -->
<div class="container" id="question">
<div class="card">

<h1>Will you be my Valentine? ‚ù§Ô∏è</h1>

<button class="yes" onclick="startGame()">YES üíñ</button>
<button class="no" id="noBtn">NO üòù</button>

</div>
</div>

<!-- GAME UI -->
<div class="container hidden" id="gameUI">
<div class="card">

<h1>Catch the Hearts ‚ù§Ô∏è</h1>

<div id="targetText">
Tangkap 20 hati untuk membuka pesan ‚ù§Ô∏è
</div>

<div id="scoreText">
Score: 0 / 20
</div>

</div>
</div>

<div id="gameArea"></div>

<!-- LETTER -->
<div class="container hidden" id="letterUI">
<div class="card">

<h1>For You ‚ù§Ô∏è</h1>

<div id="letter"></div>

</div>
</div>

<script>

const TARGET = 20

const music = document.getElementById("music")

// NO BUTTON LARI
const noBtn = document.getElementById("noBtn")
noBtn.addEventListener("mouseover",()=>{
noBtn.style.top=Math.random()*200+"px"
noBtn.style.left=Math.random()*200+"px"
})

// GAME SYSTEM
let score=0
let gameRunning=false
let hearts=[]

const gameArea=document.getElementById("gameArea")
const scoreText=document.getElementById("scoreText")

function startGame(){

music.play()

document.getElementById("question").classList.add("hidden")
document.getElementById("gameUI").classList.remove("hidden")

gameRunning=true

spawnSpam()

requestAnimationFrame(updateHearts)

}

// SPAWN TERUS
function spawnSpam(){

setInterval(()=>{

if(!gameRunning) return

createHeart()

},250)

}

function createHeart(){

let heart=document.createElement("div")

heart.innerHTML="‚ù§Ô∏è"
heart.className="heart"

let x=Math.random()*window.innerWidth
let y=window.innerHeight+40
let speed=1+Math.random()*2

heart.style.left=x+"px"
heart.style.top=y+"px"

gameArea.appendChild(heart)

let obj={el:heart,y,speed}

// CLICK EVENT
heart.onclick=(e)=>{

e.stopPropagation()

heart.remove()

score++

scoreText.innerText=`Score: ${score} / ${TARGET}`

hearts=hearts.filter(h=>h!==obj)

if(score>=TARGET){

endGame()

}

}

hearts.push(obj)

}

// UPDATE LOOP
function updateHearts(){

if(gameRunning){

for(let i=hearts.length-1;i>=0;i--){

let h=hearts[i]

h.y-=h.speed

h.el.style.top=h.y+"px"

if(h.y<-40){

h.el.remove()

hearts.splice(i,1)

}

}

}

requestAnimationFrame(updateHearts)

}

// END GAME
function endGame(){

gameRunning=false

document.getElementById("gameUI").classList.add("hidden")
document.getElementById("letterUI").classList.remove("hidden")

typeLetter()
startConfetti()

}

// TYPE LETTER
let text=
"Hai kamu...\n\n"+
"Website ini mungkin sederhana...\n\n"+
"Tapi perasaanku ke kamu itu tidak sederhana ‚ù§Ô∏è\n\n"+
"I love you ‚ù§Ô∏è"

"Hamka fakyu"


let i=0

function typeLetter(){

if(i<text.length){

document.getElementById("letter").innerHTML+=text.charAt(i)

i++

setTimeout(typeLetter,40)

}

}

// CONFETTI
const canvas=document.getElementById("confetti")
const ctx=canvas.getContext("2d")

canvas.width=window.innerWidth
canvas.height=window.innerHeight

let pieces=[]

for(let i=0;i<120;i++){

pieces.push({

x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
size:Math.random()*6+4,
speed:Math.random()*3+1

})

}

function startConfetti(){

function update(){

ctx.clearRect(0,0,canvas.width,canvas.height)

ctx.fillStyle="white"

pieces.forEach(p=>{

ctx.fillRect(p.x,p.y,p.size,p.size)

p.y+=p.speed

if(p.y>canvas.height)p.y=0

})

requestAnimationFrame(update)

}

update()

}

</script>

</body>
</html>
